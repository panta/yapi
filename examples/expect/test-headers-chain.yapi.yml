# Header assertions in a chain
yapi: v1
url: https://httpbin.org

chain:
  - name: get_headers
    path: /response-headers
    query:
      X-Custom-Value: "12345"
    expect:
      status: 200
      assert:
        headers:
          - .["X-Custom-Value"] != null
        body:
          - .["X-Custom-Value"] == "12345"

  - name: check_previous_header
    path: /anything
    json: '{"previous_header": "$get_headers.headers.X-Custom-Value"}'
    expect:
      status: 200
      assert:
        body:
          - .json["previous_header"] == "12345"
