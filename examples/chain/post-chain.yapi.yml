# POST chain example: Create a resource, then use its data
# Note: JSONPlaceholder is a mock API - posts aren't actually persisted
# but you can reference the created post's ID in subsequent requests
yapi: v1
chain:
  - name: create_post
    url: https://jsonplaceholder.typicode.com/posts
    method: POST
    body:
      title: "Test Post"
      body: "This is a test post body"
      userId: 1
    expect:
      status: 201
      assert:
        - .id != null
        - .title == "Test Post"

  - name: get_comments
    # Use the created post ID to get comments (this works as a real fetch)
    url: https://jsonplaceholder.typicode.com/posts/1/comments
    method: GET
    headers:
      X-Created-Post-Id: ${create_post.id}
    expect:
      status: 200
      assert:
        - . | length > 0
        - .[0].postId == 1
